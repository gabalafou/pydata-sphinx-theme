/**
 * Sphinx togglebutton
 */

.bd-content {
  // Admonition toggles
  .admonition {
    button.toggle-button {
      color: inherit;
    }

    // Focus ring
    //
    // Sphinx-togglebutton makes the entire admonition header clickable, but
    // only the button within the header is focusable. We want the entire
    // clickable area to be surrounded with a focus ring, so that's why we use
    // the :focus-within selector, rather than a :focus-visible selector on the
    // button.
    &:focus-within {
      overflow: visible;

      .admonition-title:focus-within:before {
        content: "";
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        left: 0;
        width: calc(100% - $focus-ring-width);
        height: 100%;
        outline: $focus-ring-outline;
        border-radius: $focus-ring-width;
      }

      // When expanded, sharpen the bottom left and right corners of the focus ring
      &:not(.toggle-hidden) .admonition-title:focus-within:before {
        border-radius: $focus-ring-width $focus-ring-width 0 0;
      }
    }
  }

  // Details buttons
  details.toggle-details {
    // Over-ride border color to re-use our primary color
    summary {
      border-left: 3px solid var(--pst-color-primary);
    }

    // When expanded, sharpen the bottom left and right corners of the focus ring
    &[open] :focus-visible {
      border-radius: $focus-ring-width $focus-ring-width 0 0;
    }
  }
}
